# services/orchestrator 目录结构

说明: 基于当前源码内容整理, 仅包含已有文件/目录.

## Tree (含功能/内容简述)

```Plaintext
services/orchestrator/
└── src/
    ├── main.py                 # FastAPI 应用入口: CORS, /api 路由, /assets 静态挂载, /healthz
    ├── config/
    │   └── runtime.py          # 运行时路径 management: ORCH_RUNTIME_DIR, assets/cache/logs 目录创建
    ├── api/
    │   ├── router.py           # API 路由聚合: 挂载 jobs 路由
    │   └── jobs.py             # 任务 API: 创建/查询任务, SSE 事件流, job->dict
    ├── scheduler/
    │   ├── models.py           # Job/JobStatus 数据模型, 默认 stage 初始化
    │   ├── events.py           # EventBus: job 级别异步订阅/发布
    │   ├── store.py            # 内存 JobStore: 创建/更新/日志/资产, 写入 uir/manifest
    │   ├── worker.py           # 异步 worker: 模拟流水线阶段, GPU 信号量, 更新 manifest/资产
    │   ├── reporter.py         # ProgressReporter: status/log/asset 事件上报
    │   └── __init__.py         # scheduler 对外导出 (store/event/worker 等)
    ├── storage/
    │   ├── job_fs.py           # 任务目录结构/写入 uir.json/列举 manifest
    │   ├── manifest.py         # manifest 读写, outputs 映射, 资产 URL 组装
    │   └── __init__.py         # storage 导出
    ├── adapters/
    │   ├── base.py             # Adapter 协议/基础类/错误结构/资产引用辅助
    │   ├── dummy.py            # DummyAdapter: 写 dummy_meta.json, 产出 scene_meta 资产
    │   └── animationgpt.py     # AnimationGPT 适配器: 调 demo, npy->bvh, 写 log/元数据
    ├── uir/
    │   ├── models.py           # UIR Pydantic schema/默认值/验证规则
    │   ├── validate.py         # UIR 解析/语义校验/错误格式化
    │   ├── hash.py             # UIR 稳定哈希 (剥离 created_at)
    │   └── __init__.py         # uir 对外导出
    └── planner/                # 空目录/预留
```

