## 前端 UI 重构建议

前端界面应围绕对话式多模态创作体验进行改进，突出简洁交互和实时反馈：

- **对话式多轮交互**：以聊天对话框作为核心输入入口，用户通过对话发送自然语言指令来创建内容。支持多轮对话引导：平台可以像 ChatGPT 一样记忆上下文，允许用户逐步细化要求（例如先让用户描述大致需求，后续轮次选择风格、调整细节等）。在对话界面中，可引入**风格选择卡片**等交互元素——例如当用户请求生成音乐时，界面弹出几个风格选项卡（流行、古典、电子等）供点击，或在生成场景时提供环境类型快捷按钮（森林、城市、沙漠等）。这些卡片选项可以作为预设提示，降低用户输入难度并提高创作多样性。
- **任务状态反馈**：在对话窗口中实时反馈各生成任务的进度和状态。每当用户提交请求后，聊天气泡下方或对话流中可显示一个**状态消息**（例如“[场景生成] 正在处理中…50%”），动态更新进度条或文案。对于耗时稍长的任务（如渲染视频），可以在界面某处集中显示任务列表及其状态，让用户随时了解哪些内容仍在生成。类似 ChatGPT/Claude 的打字动画反馈，这里可以用简洁的文字或进度条提示，避免界面卡顿。任务完成时，状态消息转换为“✅ 完成”，并自动在对话中附上预览结果。若任务失败或超时，也要及时提示错误信息，指导用户调整请求。
- **结果预览与导出**：针对不同模态结果，在UI中提供对应的预览和操作。对于**3D动作/场景**，集成一个简易的三维预览窗口：可以利用Three.js等在网页中加载BVH骨骼动画和环境模型/全景图，实现旋转、缩放视图查看生成的动画场景。如果直接在网页渲染3D有困难，也可以在后端将动画和场景合成渲染为视频/动图，前端播放该预览视频。对于**音频**结果，提供内嵌的播放器控件，让用户可以播放/暂停生成的音乐。在每个结果预览区域，还应提供**下载和导出**选项：比如“导出MP4视频”按钮，一键将当前动画+场景+音乐合成为视频文件并提供下载；“下载BVH”/“下载音频”按钮，让用户获取源文件以便离线使用。预览与导出模块应设计得简洁直观，在用户不需要时可以收拢隐藏，以保持界面整洁。
- **项目管理模块**：为了方便用户管理多轮创作产出，可加入项目管理功能。用户每进行一次完整的多模态生成（包括动画、场景、音乐组合）可视为一个“项目”。前端可以在侧边栏或顶部菜单提供“我的项目”入口，展示项目列表。每个项目项下包含生成的各资源文件（缩略图/名称）和创建时间，点击项目可以重新载入该场景的预览和文件。用户可以对项目重命名、删除或分享（如导出项目配置JSON）。项目管理模块需要与后端的文件缓存协调，实现项目的保存与读取。这使用户能够随时回顾之前的创作并基于其进行二次编辑，提高平台的实用性。
- **视觉与交互设计**：界面风格追求**简约高级**，参考 Claude 和 ChatGPT 等聊天机器人的设计语言。配色上采用中性浅色或暗色调搭配高亮点缀，保证专业且不分散注意。版式布局上，聊天区域居中突出，预览/功能面板作为辅助区域隐于侧栏或弹出。尽量减少冗余的按钮和文字说明，通过图标和逐步展现的交互引导用户。动画效果上，可加入平滑过渡和微交互（例如按钮悬停提示、对话消息淡入），提升高级感。总之，UI 重构应以用户体验为中心：让用户感觉就像与一个智能创作助理对话，由系统在背后默默完成繁杂工作，整个过程流畅自然。

## 1) UI/UX 重设计：按“ChatGPT 对话为中心 + 右侧浮现选项卡 + 作品库/预览/导出”的信息架构

你明确希望参考 ChatGPT/Claude/Gemini 的对话体验，并且在用户输入后“在页面某块区域浮现出风格选择框”，随后不断提示进展；还要有作品管理、在线预览、视频导出。

我给你一个**非常具体、可以照着做的页面方案**。

------

### 8.1 全站信息架构（3 个页面够用）

1）**Create（对话生成页）**：`/`

- 对话为中心（左-中-右三栏）
- 右侧是“浮现式参数/风格选择区”
- 生成完成后在右侧切换为“预览/导出”Tab

2）**Library（作品管理页）**：`/works`

- 瀑布流/网格卡片
- 支持搜索/筛选（风格、时长、日期）
- 点击卡片进详情

3）**Work Detail（作品详情页）**：`/works/:id`

- 大预览（3D + 音频 + 时间轴）
- 资源下载（BVH/WAV/PNG/MP4）
- 导出设置（分辨率、帧率、相机预设）

> 不做登录也没问题：本地存储 + 服务端按 job_id 存作品；如果以后要多人协作再加账号。

------

### 8.2 Create 页布局（对话为中心）

**左侧 Sidebar（窄栏）**

- Logo / “New Project”
- “My Works”入口
- 最近 10 个作品缩略列表（点击直接打开）

**中间 Main（对话）**

- Chat 流：用户输入 → 系统回复（Plan / Progress / Result）
- 输入框：多行 + 模板按钮（“动作”“镜头”“氛围”“时长”快捷插入）
- 发送后：消息流里出现“正在规划…”并滚动展示阶段进度（像 ChatGPT 工具调用那种感觉）

**右侧 Inspector（浮现区）**

- Step 1：用户刚发 prompt 后浮现“风格选择卡片”
  - 4 个大卡：Cinematic / Anime / Low-poly / Realistic
  - 3 个 mood：Epic / Calm / Horror
  - 时长 slider（5~30s）
  - “高级设置”折叠（模型选择、seed、分辨率）
- Step 2：开始生成后，右侧变成“Pipeline 状态面板”
  - 任务队列位置（Queue #）
  - 当前阶段（Motion/Scene/Music）
  - 进度条 + 最近日志 3 行
- Step 3：完成后，右侧变成“Preview/Assets/Export” Tabs
  - Preview：3D 预览 + 音频播放器
  - Assets：下载 BVH/WAV/Scene PNG
  - Export：导出视频按钮 + 预设

这种布局能同时满足：**对话重心** + **参数选择不打断主对话** + **产物管理**。

------

### 8.3 视觉风格建议（“高级、简约”落地到组件层）

我建议用：

- 技术栈：**Next.js + Tailwind + shadcn/ui + Framer Motion**（非常容易做出高级的动效与质感）
- 全站暗色主题（深灰，不是纯黑）+ 低饱和点缀色
- 玻璃拟态（轻微 blur + 低透明度）只用于右侧 Inspector
- 所有动效遵循：**进入 150~220ms，退出 120ms，缓动统一**
- 关键组件：
  - Chat bubble（区分 system / tool / result）
  - Stepper（Plan → Generate → Compose → Export）
  - Result Card（带缩略图/音频波形/标签）

------

## 2) 在线预览与视频导出：我建议你们分“两条路”实现

你们要“在线预览、视频导出”。这里我给你**最务实**的两条实现路线：

### 2.1 在线预览（前端）

- 使用 Three.js（或 react-three-fiber）
- Scene：加载你们的 360 panorama 作为环境贴图（Equirectangular）
- Character：先用你们内置的一套“预绑定角色库”（你们文档里也提到这个方案最务实）
- Motion：BVH 播放（Three.js 有 BVHLoader；必要时在后端把 BVH 预处理成更统一的骨架）

> 先把“骨架动画 + 环境 + 音频播放”跑通就赢一半。

### 2.2 视频导出（先易后难）

**方案 A（最快）：浏览器录制 Canvas**

- 用 MediaRecorder 录制 WebGL canvas → WebM
- 服务端用 ffmpeg 转 MP4 + 合成 wav（或前端 wasm 转）
  优点：开发快、部署简单
  缺点：质量受用户机器影响

**方案 B（更稳定）：服务端离线渲染**

- 后端用 Blender CLI / 或 headless three.js 渲染帧序列
- ffmpeg 合成视频 + 音频
  优点：质量一致、可控
  缺点：需要安装 Blender/渲染环境

你们目前更需要“先做出可用的导出”，所以建议：**先 A 后 B**。